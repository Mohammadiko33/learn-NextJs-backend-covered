## 🎯 Suspense SSR یعنی چی؟

در React، **Suspense** قابلیتیه که بهت اجازه میده **بارگذاری داده‌ها یا بخش‌های مختلف صفحه** رو کنترل کنی تا تجربه کاربری بهتر بشه.

حالا وقتی این رو با **Server Side Rendering (SSR)** ترکیب می‌کنیم، میشه **Suspense SSR**.

به زبان ساده:

> با Suspense SSR می‌تونی صفحه رو از سمت سرور رندر کنی، ولی بخش‌هایی که هنوز داده‌شون آماده نیست رو موقتاً با یه حالت "در حال بارگذاری..." نشون بدی و بعد که داده آماده شد، همون‌جا جایگزین کنی **بدون اینکه کل صفحه دوباره لود بشه**.

---

## 🔍 چرا مهمه؟

* توی SSR قدیمی، سرور باید صبر می‌کرد **همه داده‌ها آماده بشه** تا یک‌جا صفحه کامل رو بفرسته → این باعث می‌شد کاربر دیرتر چیزی ببینه.
* توی Suspense SSR، سرور **همون بخش‌هایی که آماده‌ست** رو سریع می‌فرسته، و بعد بقیه بخش‌ها رو به صورت استریم (تکه‌تکه) اضافه می‌کنه.

نتیجه: **کاربر زودتر محتوای اولیه رو می‌بینه**.

---

## 🛠 مثال ساده

فرض کن ما یک صفحه داریم که دو بخش داره:

1. لیست اخبار سریع‌الوصول
2. گزارش آب‌وهوا که از یک API کند میاد

با SSR عادی:

* باید صبر کنیم هم اخبار بیاد هم هواشناسی → بعد کل HTML رو یکجا بفرستیم.

با **Suspense SSR**:

* اول اخبار رو که سریع آماده میشه می‌فرستیم.
* بعد که داده آب‌وهوا رسید، همون قسمت جایگزین حالت "در حال بارگذاری" میشه.

📄 نمونه کد (React 18+):

```jsx
import React, { Suspense } from 'react';

function NewsList() {
  const news = getNews(); // فرضی، سریع آماده میشه
  return <ul>{news.map(n => <li key={n.id}>{n.title}</li>)}</ul>;
}

function WeatherReport() {
  const weather = getWeather(); // فرضی، کندتر آماده میشه
  return <div>دمای امروز: {weather.temp}°C</div>;
}

export default function Page() {
  return (
    <div>
      <h1>صفحه اصلی</h1>
      <NewsList />
      <Suspense fallback={<div>در حال بارگذاری هوا...</div>}>
        <WeatherReport />
      </Suspense>
    </div>
  );
}
```

توی SSR با **Streaming**:

* سرور HTML اخبار رو فوراً می‌فرسته.
* بعد از آماده شدن داده هواشناسی، همون قسمت رو به مرورگر ارسال و جایگزین میکنه.

---

## 📦 مزایای Suspense SSR

* **زمان نمایش اولین محتوای مفید (TTFB) کمتر** → کاربر سریع‌تر چیزی می‌بینه.
* **استریم محتوا** باعث میشه بخش‌های آماده زودتر به کاربر برسه.
* تجربه کاربری نرم‌تر حتی با APIهای کند.

---

## 🎯 خلاصه تصویری

1. بخش‌های آماده → فوراً رندر و ارسال
2. بخش‌های کندتر → نمایش لودر
3. وقتی آماده شد → فقط همون بخش آپدیت میشه